---
title: 6. awk
description: awk
date: 2023-10-31
weight: 60
---

<style>
th, td {
  border: 1px solid rgb(190, 190, 190);
}
</style>

{{< alert >}}

{{< /alert >}}






## 一、原理

执行awk时, 它会反复进行下列四步骤.

1. 读取一行
2. 自动更新(Update)相关的内建变量之值. 如 : NF, NR, $0...
3. 依次执行程序中 所有 的 Pattern { Actions } 指令.
4. 当执行完程序中所有 Pattern { Actions } 时, 若数据文件中还有未读取的数据, 则反复执行步骤1到步骤4.




## 运算


### 数学运算符


### 赋值运算符

### 条件运算符

### 逻辑运算符

### 关系运算符

## 变量


| 变量        | 描述                                              | 举例说明 |
| :---------- | :------------------------------------------------ | :------- |
| \$n         | 当前记录的第n个字段，字段间由FS分隔               |          |
| \$0         | 完整的输入记录                                    |          |
| ARGC        | 命令行参数的数目                                  |          |
| ARGIND      | 命令行中当前文件的位置(从0开始算)                 |          |
| ARGV        | 包含命令行参数的数组                              |          |
| CONVFMT     | 数字转换格式(默认值为%.6g)ENVIRON环境变量关联数组 |          |
| ERRNO       | 最后一个系统错误的描述                            |          |
| FIELDWIDTHS | 字段宽度列表(用空格键分隔)                        |          |
| FILENAME    | 当前文件名                                        |          |
| FNR         | 同NR，但相对于当前文件                            |          |
| FS          | 字段分隔符(默认是任何空格)                        |          |
| IGNORECASE  | 如果为真，则进行忽略大小写的匹配                  |          |
| NF          | 当前记录中的字段数                                |          |
| NR          | 当前记录数                                        |          |
| OFMT        | 数字的输出格式(默认值是%.6g)                      |          |
| OFS         | 输出字段分隔符(默认值是一个空格)                  |          |
| ORS         | 输出记录分隔符(默认值是一个换行符)                |          |
| RLENGTH     | 由match函数所匹配的字符串的长度                   |          |
| RS          | 记录分隔符(默认是一个换行符)                      |          |
| RSTART      | 由match函数所匹配的字符串的第一个位置             |          |
| SUBSEP      | 数组下标分隔符(默认值是/034)                      |          |

FILENAME 当前文件名

FS

\\$0，\\$1,\\$2

OFS

RS

ORS

OFMT

NR


FNR


NF

## 正则表达式
> 匹配

> 替换

1. 简写符号

2. 位置符号

位置也是文本的特征之一，在正则中文本单纯的分为开头和结尾，分别以^和\$表示。假如你只想匹配开头或结尾出现的cat可以写作

```bash
^cat

cat$
```

3. 数量符号


```bash
# 1. {n1,n2}
在字符后添加‘{n1,n2}’表示字符出现的次数，如n1至n2间
例：a{1, 2}
例：{n1, }表示字符至少出现n1次。
例：{, n2}表示字符至多出现n2次。
例：{n}表示字符出现n次。
```


4. 组合匹配

## shell

## 数组

## 函数

index


match

split

sub

gsub

gensub

substr

int

sqrt

exp

sin

cos

rand



### print


### printf







## if



## for















