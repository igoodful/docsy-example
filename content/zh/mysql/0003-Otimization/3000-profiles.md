---
title: 3. profiles
description: profiles
date: 2023-10-31
weight: 3000


---
<style>
th, td {
  border: 1px solid rgb(190, 190, 190);
}
</style>

{{<alert  color="secondary">}}



{{</alert>}}

| 配置                  | 参数          | 备注         |
| :-------------------- | :------------ | :----------- |
| version               | 8.0.32        | 版本         |
| engine                | innodb        | 存储引擎     |
| transaction_isolation | read commited | 事务隔离级别 |




```sql
set profiling=1;

show profiles;

show profile for query 1;

show profile cpu block io for query 1;





set profiling=0;
```



```sql
[admin@127.0.0.1:16315 14:33:14((none))]$ set profiling=on;
Query OK, 0 rows affected, 1 warning (0.00 sec)

[admin@127.0.0.1:16315 14:33:15((none))]$ select t1.c,t2.c from db1.sbtest1 t1 inner join db1.sbtest2 t2 on t1.c<t2.c  order by t1.c limit 10;show profiles;
+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| c                                                                                                                       | c                                                                                                                       |
+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 00004063297-35069865939-66907271107-23175197023-21033312956-19385633435-68728369815-68324803777-02761309766-93099172346 | 29258444842-50130600146-77309531343-81558696536-41125095387-79546842958-28033987256-71954956567-09072408341-15805998939 |
| 00004063297-35069865939-66907271107-23175197023-21033312956-19385633435-68728369815-68324803777-02761309766-93099172346 | 37447545477-85979629015-39040869654-86414105372-63431483106-93285737759-44717778690-19473168237-84086045435-86138353144 |
| 00004063297-35069865939-66907271107-23175197023-21033312956-19385633435-68728369815-68324803777-02761309766-93099172346 | 92269736160-07723648661-75579693942-72816345279-40882648482-24099755250-61349107388-04136468050-67181020310-61234485684 |
| 00004063297-35069865939-66907271107-23175197023-21033312956-19385633435-68728369815-68324803777-02761309766-93099172346 | 15521530746-46927244780-07632092888-85476712473-35384127676-98531485198-86870523429-43781935222-53392815612-89610085406 |
| 00004063297-35069865939-66907271107-23175197023-21033312956-19385633435-68728369815-68324803777-02761309766-93099172346 | 13962343601-81054052411-40404558126-27888213198-72816559123-47809771497-11090491213-72379652379-68570230228-06574381158 |
| 00004063297-35069865939-66907271107-23175197023-21033312956-19385633435-68728369815-68324803777-02761309766-93099172346 | 70126899755-52619249748-01215300866-60520258695-35112193034-91552892137-03161179698-29065785160-61660106642-55592137453 |
| 00004063297-35069865939-66907271107-23175197023-21033312956-19385633435-68728369815-68324803777-02761309766-93099172346 | 58273166722-10594232355-21630048147-99220633361-48530979580-81376876800-58208312253-78663876241-33702514134-58376355585 |
| 00004063297-35069865939-66907271107-23175197023-21033312956-19385633435-68728369815-68324803777-02761309766-93099172346 | 60501002453-14846248754-69043144141-35766527561-18759121933-98861883913-02710725783-78113257733-26639807306-76376587253 |
| 00004063297-35069865939-66907271107-23175197023-21033312956-19385633435-68728369815-68324803777-02761309766-93099172346 | 90964080472-03810708205-51716114956-57953853203-11991989404-49965605725-00135119186-76739164642-78908885086-95569948343 |
| 00004063297-35069865939-66907271107-23175197023-21033312956-19385633435-68728369815-68324803777-02761309766-93099172346 | 54816895853-48602365689-68141297642-45202668305-38601319974-50691919214-85052820937-79542524278-79393249639-91842156234 |
+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
10 rows in set (2 min 42.91 sec)

+----------+--------------+-----------------------------------------------------------------------------------------------------+
| Query_ID | Duration     | Query                                                                                               |
+----------+--------------+-----------------------------------------------------------------------------------------------------+
|        1 | 162.90855125 | select t1.c,t2.c from db1.sbtest1 t1 inner join db1.sbtest2 t2 on t1.c<t2.c  order by t1.c limit 10 |
+----------+--------------+-----------------------------------------------------------------------------------------------------+
1 row in set, 1 warning (0.50 sec)

[admin@127.0.0.1:16315 14:36:19((none))]$ show profile ALL for query 1;
+--------------------------------+------------+------------+------------+-------------------+---------------------+--------------+---------------+---------------+-------------------+-------------------+-------------------+-------+---------------------------+----------------------+-------------+
| Status                         | Duration   | CPU_user   | CPU_system | Context_voluntary | Context_involuntary | Block_ops_in | Block_ops_out | Messages_sent | Messages_received | Page_faults_major | Page_faults_minor | Swaps | Source_function           | Source_file          | Source_line |
+--------------------------------+------------+------------+------------+-------------------+---------------------+--------------+---------------+---------------+-------------------+-------------------+-------------------+-------+---------------------------+----------------------+-------------+
| starting                       |   0.000234 |   0.000426 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 1 |     0 | NULL                      | NULL                 |        NULL |
| Executing hook on transaction  |   0.000015 |   0.000025 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | launch_hook_trans_begin   | rpl_handler.cc       |        1376 |
| starting                       |   0.000013 |   0.000025 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | launch_hook_trans_begin   | rpl_handler.cc       |        1378 |
| checking permissions           |   0.000007 |   0.000014 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | check_access              | sql_authorization.cc |        2200 |
| checking permissions           |   0.000007 |   0.000013 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | check_access              | sql_authorization.cc |        2200 |
| Opening tables                 |   0.000730 |   0.001471 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 1 |     0 | open_tables               | sql_base.cc          |        5761 |
| init                           |   0.000022 |   0.000031 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | execute                   | sql_select.cc        |         552 |
| System lock                    |   0.000014 |   0.000027 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_lock_tables         | lock.cc              |         331 |
| optimizing                     |   0.000017 |   0.000034 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | optimize                  | sql_optimizer.cc     |         277 |
| statistics                     |   0.000028 |   0.000056 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | optimize                  | sql_optimizer.cc     |         590 |
| preparing                      |   0.000020 |   0.000038 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | optimize                  | sql_optimizer.cc     |         674 |
| Creating tmp table             |   0.000231 |   0.000462 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | create_intermediate_table | sql_executor.cc      |         189 |
| executing                      | 162.906684 | 182.554142 |   0.000000 |             93990 |               20293 |         2560 |          6528 |             0 |                 0 |                 0 |                 0 |     0 | ExecuteIteratorQuery      | sql_union.cc         |        1127 |
| end                            |   0.000064 |   0.000099 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | execute                   | sql_select.cc        |         585 |
| query end                      |   0.000067 |   0.000134 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 1 |     0 | mysql_execute_command     | sql_parse.cc         |        4566 |
| waiting for handler commit     |   0.000061 |   0.000120 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | ha_commit_trans           | handler.cc           |        1594 |
| closing tables                 |   0.000031 |   0.000062 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_execute_command     | sql_parse.cc         |        4624 |
| freeing items                  |   0.000094 |   0.000190 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | dispatch_sql_command      | sql_parse.cc         |        5075 |
| logging slow query             |   0.000154 |   0.000309 |   0.000000 |                 0 |                   0 |            0 |             8 |             0 |                 0 |                 0 |                 0 |     0 | log_slow_do               | log.cc               |        1639 |
| cleaning up                    |   0.000064 |   0.000124 |   0.000000 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | dispatch_command          | sql_parse.cc         |        2276 |
+--------------------------------+------------+------------+------------+-------------------+---------------------+--------------+---------------+---------------+-------------------+-------------------+-------------------+-------+---------------------------+----------------------+-------------+
20 rows in set, 1 warning (0.00 sec)

[admin@127.0.0.1:16315 14:44:04((none))]$


```









