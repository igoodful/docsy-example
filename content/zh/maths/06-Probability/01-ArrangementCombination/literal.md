---
title: 元素错排
description: 元素错排
date: 2023-10-30
weight: 10000


---
<style>
th, td {
  border: 1px solid rgb(190, 190, 190);
}
</style>

{{< alert >}}



- 多个相邻

- 相邻对数

- 相邻不相邻

{{< /alert >}}



&#128311;【】设有编号为$1,2,3,4,5$的小球和编号为$1,2,3,4,5$的盒子，现将$5$个小球放入$5$个盒子，每盒一球，小球编号与盒子编号都不相同，有多少种不同放法？

【】做事：元素是$5$个不同小球；位置是$5$个不同盒子；
放置规则：每盒一球，小球编号与盒子编号都不相同；

【】设共有$f\left( 5 \right)$种不同放法
- 第一步：先安排编号为$1$的小球，根据规则，可以放到编号为$2,3,4,5$的盒子，则有：$\operatorname{C} _{4}^{1}$；
不妨设编号为$1$的小球放置到编号为$5$的盒子，如下图：
$\begin{align}
  &  \\
 & \text{ 1 2  3  4 5} \\
\end{align}$

- 第二步：再安排编号为$5$的小球，可分为两类
  - 若编号为$5$的小球放置到编号为$1$的盒子，如下图：
$\begin{align}
  &  \\
 & \text{ 1 2  3  4 5} \\
\end{align}$
则只需将剩下的编号为$2,3,4$的$3$个小球错排到编号为$2,3,4$的$3$个盒子，则有：$f\left( 3 \right)$
  - 若编号为$5$的小球不放置到编号为$1$的盒子，如下图：
$\begin{align}
  &  \\
 & \text{ 1 2  3  4 5} \\
\end{align}$

问题转化为：编号为$5,2,3,4$的$4$个小球放到编号为$1,2,3,4$的$4$个盒子时，满足：小球$5$不放到盒子$1$，小球$2$不放到盒子$2$，小球$3$不放到盒子$3$，小球$4$不放到盒子$4$

因此将小球$5$当做小球$1$，相当于编号为$5,2,3,4$的$4$个小球错排到编号为$1,2,3,4$的$4$个盒子，即$4$个元素的错排，则有：$f\left( 4 \right)$

综上，可得：$f\left( 5 \right)=\left( 5-1 \right)\left[ f\left( 5-2 \right)+f\left( 5-1 \right) \right]$

可得：$f\left( 5 \right)=4f\left( 3 \right)+4f\left( 4 \right)$

易知：当只有$1$个小球时，此时错排，则有：$f\left( 1 \right)=0$；

易知：当只有$2$个小球时，此时错排，只有$1$种，则有：$f\left( 2 \right)=1$；

【】设有编号为$1,2,3,\cdot \cdot \cdot ,n$的小球和编号为$1,2,3,\cdot \cdot \cdot ,n$的盒子，现将$n$个小球放入$n$个盒子，每盒一球，小球编号与盒子编号都不相同，有多少种不同放法？

【思路】做事：元素是$n$个不同小球；位置是$n$个不同盒子；
放置规则：每盒一球，小球编号与盒子编号都不相同；

【解析】设共有$f\left( n \right)$种不同放法
- 第一步：先安排编号为$1$的小球，根据规则，可以放到编号为 的盒子，则有：$\operatorname{C} _{n-1}^{1}$；

不妨设编号为 的小球放置到编号为 的盒子，如下图：

- 第二步：再安排编号为 的小球，可分为两类
  - 若编号为 的小球放置到编号为$1$的盒子，如下图：

则只需将剩下的 的 个小球错排到 的$n-2$个盒子，则有：

  - 若编号为 的小球不放置到编号为 的盒子，如下图：

问题转化为：编号为 的$4$个小球放到编号为 的 个盒子时，满足：小球 不放到盒子$1$，小球 不放到盒子 ，小球 不放到盒子 ，$\cdot \cdot \cdot $，小球 不放到盒子 ，小球 不放到盒子 ，$\cdot \cdot \cdot $，小球 不放到盒子

因此将小球$k$当做小球 ，相当于编号为 的 个小球错排到编号为$1,2,3,\cdot \cdot \cdot ,k-1,k+1,\cdot \cdot \cdot ,n$的 个盒子，即 个元素的错排，则有：$f\left( n-1 \right)$

综上，可得： （ ）

易知：$f\left( 1 \right)=0$，

【】设有编号为$1,2,3,\cdot \cdot \cdot ,n$的 个小球和编号为 的个盒子，现将$n$个球放入 个盒子，每盒一球，其中 个小球编号与盒子编号都不相同，有多少种不同放法？

【解析】根据剩下的$n-m$个小球编号与盒子编号不相同的个数为分类标准：
1. 当剩下的 个小球中，恰有$0$个小球编号与盒子编号相同，则有： ；
2. 当剩下的 个小球中，恰有$1$个小球编号与盒子编号相同，则有： ；
3. 当剩下的$n-m$个小球中，恰有 个小球编号与盒子编号相同，则有：$\operatorname{C} _{n-m}^{2}f\left( n-2 \right)$；

当剩下的 个小球中，恰有$n-m$个小球编号与盒子编号相同，则有： ；

综上，共有：$\operatorname{C} _{n-m}^{0}f\left( n \right)+\operatorname{C} _{n-m}^{1}f\left( n-1 \right)+\operatorname{C} _{n-m}^{2}f\left( n-2 \right)+\cdot \cdot \cdot +\operatorname{C} _{n-m}^{n-m}f\left( m \right)$

【】今有 人站成一排，甲不站排头，乙不站排尾，丙不站正中间，有多少种不同的站法？

【思路】做事：元素是$5$个不同的人 ；位置是 个不同的位置$\begin{align}
  &  \\
 & \text{ 1 2  3 4  5} \\
\end{align}$
放置规则：等价于 不站对应的位置上，元素号和位置号错排

【解析】根据剩余$2$个人错排情况为分类标准：
1. 当元素 恰有$0$个元素错排，则有： ；
2. 当元素$\left\{ 4,5 \right\}$恰有 个元素错排，则有：$\operatorname{C} _{2}^{1}f\left( 4 \right)=2\times 9=18$；
3. 当元素 恰有$2$个元素错排，则有：$\operatorname{C} _{2}^{0}f\left( 5 \right)=44$；

综上，共有：

【】$5$个人站在一排，重新站成一排，按如下条件，有多少种战法？

（1）恰有 人站在自己原来的位置上；

（2）恰有$2$人站在自己原来的位置上；

（3）恰有 人站在自己原来的位置上；

（4）恰有$0$人站在自己原来的位置上；

【思路】元素是 个不同的人 ；位置是$5$个不同的位置 ；
放置规则：如上；

【解析】

（1）恰有$3$人站在自己原来的位置上：
- 第一步：先从 个人中选$3$人，其他人位置不变，则有： 种；
- 剩下的两个人都不能站在自己原来的位置上，则有：$1$种；

故共有： 种战法

（2）方法一：分步做事：
- 第一步：先从$5$个人中选 人，其他人位置不变，有$\operatorname{C} _{5}^{2}=10$种；
剩下的三个人都不能站在自己原来的位置上：
- 第二步：第一个人有 种站法；
- 第三步：被站位置的那个人也有$1$种站法；
- 第四步：最后两人只有 种站法；

故不同的调换方法有：$10\times 2\times 1\times 1=20$

方法二：$f\left( n \right)=\left( n-1 \right)\left[ f\left( n-1 \right)+f\left( n-2 \right) \right]$

可得：

易知：$f\left( 1 \right)=0$，

解得：$f\left( 4 \right)=9$

故共有：

（3）方法一：分步做事：
- 第一步：先从$5$个人中选 人，其他人位置不变，有$\operatorname{C} _{5}^{1}=5$种；
剩下的四个人都不能站在自己原来的位置上：
- 第二步：第一个人有 种站法；
- 第三步：被站位置的那个人也有$3$种站法；
- 第四步：最后两人只有 种站法；

故不同的调换方法有：$5\times 3\times 3\times 1=45$
方法二：

可得：$f\left( 4 \right)=3\left[ f\left( 3 \right)+f\left( 2 \right) \right]$，$f\left( 3 \right)=2\left[ f\left( 2 \right)+f\left( 1 \right) \right]$

易知： ，$f\left( 2 \right)=1$

解得：

故共有：$\operatorname{C} _{5}^{1}f\left( 4 \right)=45$

（4）方法一：分步做事：
- 第一步： 可以站在$1$号以外的 个位置，则有：$\operatorname{C} _{4}^{1}$；
- 第二步：不妨设$A$在 号，再安排$D$，可分为两类：
  - 当 在$1$号时，只需其余 个元素错排，则有：$\operatorname{C} _{2}^{1}$
  - 当 不在$1$号时，相当于 个元素错排，则有：$\operatorname{C} _{9}^{1}$

综上，共有：

方法二：$f\left( n \right)=\left( n-1 \right)\left[ f\left( n-1 \right)+f\left( n-2 \right) \right]$

可得： ，$f\left( 4 \right)=3\left[ f\left( 3 \right)+f\left( 2 \right) \right]$，$f\left( 3 \right)=2\left[ f\left( 2 \right)+f\left( 1 \right) \right]$

易知：$f\left( 1 \right)=0$，

解得：$f\left( 5 \right)=44$

故共有：

【】$7$位朋友携妻子参加一次舞会，他们规定跳舞时，每人都不能选自己的妻子做舞伴，共有多少种不同的搭配方法？$f\left( 4 \right)=9$， ，$f\left( 6 \right)=265$，





























